!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Mani=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./utilities");Documents=function(a,b){this.options=a?a:{},this.items=[],this._idCount=0,this.eventEmitter=b?this.eventEmitter:null},Documents.prototype.getItemById=function(a){for(var b=null,c=this.items.length,e=0;c>e;){if(this.items[e].id===a){var b=d.cloneDeep(this.items[e]);break}e++}return b},Documents.prototype.getItemsFromResults=function(a){var b=[],c=0,d=0;if(Array.isArray(a))for(c=a.length;c>d;){var e=parseInt(a[d].ref,10),f=this.getItemById(e);void 0!==a[d].score&&(f.score=a[d].score),void 0!==a[d].distance&&(f.distance=a[d].distance),b.push(f),d++}return b},Documents.prototype.removeAll=function(){this.items=[],this._idCount=0},Documents.prototype.add=function(a){return a.id=this._idCount,this._idCount++,this.items.push(a),a},b.exports=Documents},{"./utilities":9}],2:[function(a,b,c){function d(a,b){return e.isNumber(a)&&Array.isArray(b)?(a=parseInt(a,10),b.slice(0,a)):[]}var e=a("./utilities");Facets=function(a){this.items=[],this.eventEmitter=a?this.eventEmitter:null},Facets.prototype.build=function(a,b,c){function f(a){var c=b.path,d=e.reach(a,c);d&&(Array.isArray(d)?d.forEach(function(a,c){b.lowerCase&&(a=a.toLowerCase()),g[a]=(void 0===g[a]?0:g[a])+1}):(b.lowerCase&&(d=d.toLowerCase()),g[d]=(void 0===g[d]?0:g[d])+1))}b=b?b:{},b.lowerCase=void 0!==b.lowerCase?b.lowerCase:!0;var g=(b.field,{});c?c.forEach(function(b){var c=parseInt(b.ref,10),d=a.getItemById(c);f(d)}):a.items.forEach(function(a,b){f(a)});var h=[];for(var i in g)h.push([i,g[i]]);return h.sort(function(a,b){return b[1]-a[1]}),this.items=h,b.limit&&(h=d(b.limit,h)),h},b.exports=Facets},{"./utilities":9}],3:[function(a,b,c){var d=a("lunr"),e=a("./utilities");FreeText=function(a,b){this._lunrIndex=null,this.options=a||{},a.text&&(this.options.text=a.text,this._lunrIndex=this._getLunrIndex(this.options),a.stopWords&&(this._lunrIndex.pipeline._stack[1].stopWords=a.stopWords)),this.eventEmitter=b?this.eventEmitter:null},FreeText.prototype.search=function(a){var b=null;a&&a.text&&(b=this._lunrIndex.search(a.text));var b=b.map(function(a){return a.ref=parseInt(a.ref,10),a});return e.sortByOrder(b,["score","ref"],[!1,!0])},FreeText.prototype._getLunrIndex=function(a){if(a&&a.text){var b=function(){var b=this;a.text&&a.text.forEach(function(a,c){a.boost?b.field("p"+c,{boost:a.boost}):b.field("p"+c)}),this.ref("id")};return d(b)}return null},FreeText.prototype._flatten=function(a){var b={};return this.options.text&&(this.options.text.forEach(function(c,d){var f=e.reach(a,c.path);f&&(Array.isArray(f)&&(f=f.join(" ")),b["p"+d]=f)}),b.id=a.id),b},FreeText.prototype.removeAll=function(){this._lunrIndex=null},FreeText.prototype.toJSON=function(){return this._lunrIndex.toJSON()},FreeText.prototype.fromJSON=function(a){this._lunrIndex=d.Index.load(a)},FreeText.prototype.add=function(a){return this._lunrIndex&&this._lunrIndex.add(this._flatten(a)),a},b.exports=FreeText},{"./utilities":9,lunr:11}],4:[function(a,b,c){var d=a("geolib"),e=a("./utilities");Geo=function(a,b){this.items=[],this.options={},a.geo&&(this.options=a),this.eventEmitter=b?this.eventEmitter:null},Geo.prototype.search=function(a,b){return this.options=a?a:{},a.nearby?this.nearby(a):void 0},Geo.prototype.nearby=function(a,b){this.options=a?a:{};var c=null,e=null,f=this._getDocumentSubSet(b),g=this._getResultLimit(a);g||(g=1e3),a.sort||(a.sort={path:"distance",reverse:!1});var h=0;return a.nearby.offset&&(h=a.nearby.offset),a.nearby&&(c=d.findNearest(a.nearby,f,a.nearby.offset,g),c&&(Array.isArray(c)||(c=[c]),e=[],c.forEach(function(a,b){e.push({ref:a.key,distance:a.distance})}))),e},Geo.prototype._getResultLimit=function(a){var b=null;if(a){var c=e.reach(a,"startAt"),d=e.reach(a,"limit");void 0!==d&&(b=d,void 0!==c&&(b=c-1+d))}return b},Geo.prototype._flatten=function(a){var b={};return e.reach(this,"options.geo.point")&&(b.ref=a.id,b.latitude=this._getFloat(e.reach(a,e.reach(this,"options.geo.point.latitudePath"))),b.longitude=this._getFloat(e.reach(a,e.reach(this,"options.geo.point.longitudePath")))),void 0===b.latitude||void 0===b.longitude?null:b},Geo.prototype._getFloat=function(a){return Array.isArray(a)&&(a=a[0]),e.isString(a)&&(a=parseFloat(a)),a},Geo.prototype._getDocumentSubSet=function(a){var b=this,c={};return a?a.forEach(function(a){b.items.forEach(function(b){parseInt(a.ref,10)===b.ref&&(c[a.ref]=b)})}):c=this.items,c},Geo.prototype.removeAll=function(){this.items=[]},Geo.prototype.add=function(a){var b=this._flatten(a);return null!==b?(this.items.push(this._flatten(a)),a):null},b.exports=Geo},{"./utilities":9,geolib:10}],5:[function(a,b,c){function d(a){return new d.Index(a)}var e=a("lunr"),f=a("geolib"),g=(a("./utilities"),a("./documents")),h=a("./freetext"),i=a("./match"),j=a("./geo"),k=a("./facets"),l=a("./paging");d.version="0.0.2",d.Index=function(a){this._configure(a)},d.Index.prototype._configure=function(a){this.version=d.version,this.options=a?a:{},this.options.name=this.name?this.name:"Mani",this.eventEmitter=new e.EventEmitter,this.documents=new g(this.options,this.eventEmitter),this._freetext=new h(this.options,this.eventEmitter),this._match=new i(this.options,this.eventEmitter),this._geo=new j(this.options,this.eventEmitter),this.eventEmitter.emit("configured",a,this)},d.geo=f,d.lunr=e,d.Index.prototype.search=function(a){a=a?a:{};var b={criteria:a,items:[]},c=null;if(a.text&&(c=this._freetext.search(a,c)),a.query&&(c=this._match.search(a,this.documents,c)),a.nearby&&(c=this._geo.nearby(a,c)),a.sort||a.startAt||a.limit){var d=l.page(a,this.documents,c);b.items=d.documents,d.info&&(b.paging=d.info)}else b.items=this.documents.getItemsFromResults(c);if(a.facets){var e=new k;b.facets=e.build(this.documents,a.facets,c)}return b},d.Index.prototype.facets=function(a){if(a){var b=new k;return b.build(this.documents,a)}return null},d.Index.prototype.add=function(a,b){b=b?b:{};var c=a;if(b.ftsIndex||(b.ftsIndex=!0),c){Array.isArray(c)===!1&&(c=[c]);var d=this;return c.forEach(function(a){d.documents.add(a),b.ftsIndex===!0&&d._freetext.add(a),d._geo.add(a)}),this.eventEmitter.emit("add",a,"add",this),a}return this.eventEmitter.emit("add",null,"add",this),null},d.Index.prototype.removeAll=function(a){var b=this.documents.items.length;this.documents.removeAll(),this._freetext.removeAll(),this._geo.removeAll(),this.eventEmitter.emit("removeAll",b,"removed",this),a(null,b)},d.Index.prototype.on=function(){var a=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,a)},d.Index.prototype.off=function(a,b){return this.eventEmitter.removeListener(a,b)},d.Index.prototype.toJSON=function(){var a={version:this.version,options:this.options,items:this.documents.items};return this._freetext._lunrIndex&&(a.ftsIndex=this._freetext.toJSON()),a},d.Index.prototype.fromJSON=function(a){a.options&&this._configure(a.options),this._freetext&&this._freetext._lunrIndex&&a.ftsIndex&&this._freetext.fromJSON(a.ftsIndex),this.add(a.items,{ftsIndex:!1})},d.Index.prototype.dataFromJSON=function(a){a.items&&this.add(a.items)},b.exports=d},{"./documents":1,"./facets":2,"./freetext":3,"./geo":4,"./match":7,"./paging":8,"./utilities":9,geolib:10,lunr:11}],6:[function(b,c,d){(function(b){(function(){function e(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||a===Ea&&d)return 1;if(b>a||!d||b===Ea&&c)return-1}return 0}function f(a,b,c){if(b!==b)return j(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function g(a){return"function"==typeof a||!1}function h(a){return"string"==typeof a?a:null==a?"":a+""}function i(a,b,c){for(var d=-1,f=a.a,g=b.a,h=f.length,i=c.length;++d<h;){var j=e(f[d],g[d]);if(j)return i>d?j*(c[d]?1:-1):j}return a.b-b.b}function j(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function k(a){return!!a&&"object"==typeof a}function l(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function m(){}function n(a){var b=a?a.length:0;for(this.data={hash:Jb(null),set:new Eb};b--;)this.push(a[b])}function o(a,b){var c=a.data,d="string"==typeof b||ra(b)?c.set.has(b):c.hash[b];return d?0:-1}function p(a){var b=this.data;"string"==typeof a||ra(a)?b.set.add(a):b.hash[a]=!0}function q(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function r(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function s(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function t(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function u(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function v(a,b,c){var d=typeof a;return"function"==d?b===Ea?a:O(a,b,c):null==a?Ba:"object"==d?E(a):b===Ea?Da(a):F(a,b)}function w(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==Ea)return h;if(!ra(a))return a;var i=Zb(a);if(i){if(h=X(a),!b)return q(a,h)}else{var j=wb.call(a),k=j==La;if(j!=Oa&&j!=Ga&&(!k||e))return kb[j]?Z(a,j,b):e?a:{};if(h=Y(k?{}:a),!b)return Tb(h,a)}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?r:y)(a,function(d,e){h[e]=w(d,b,c,e,a,f,g)}),h}function x(a,b){var c=[];return Ub(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function y(a,b){return Vb(a,b,_b)}function z(a,b,c){if(null!=a){c!==Ea&&c in fa(a)&&(b=[c]);for(var d=-1,e=b.length;null!=a&&++d<e;)a=a[b[d]];return d&&d==e?a:Ea}}function A(a,b,c,d,e,f){if(a===b)return!0;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:B(a,b,A,c,d,e,f)}function B(a,b,c,d,e,f,g){var h=Zb(a),i=Zb(b),j=Ha,k=Ha;h||(j=wb.call(a),j==Ga?j=Oa:j!=Oa&&(h=va(a))),i||(k=wb.call(b),k==Ga?k=Oa:k!=Oa&&(i=va(b)));var l=j==Oa,m=k==Oa,n=j==k;if(n&&!h&&!l)return T(a,b,j);if(!e){var o=l&&vb.call(a,"__wrapped__"),p=m&&vb.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?S:U)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function C(a,b,c,d,e){for(var f=-1,g=b.length,h=!e;++f<g;)if(h&&d[f]?c[f]!==a[b[f]]:!(b[f]in a))return!1;for(f=-1;++f<g;){var i=b[f],j=a[i],k=c[f];if(h&&d[f])var l=j!==Ea||i in a;else l=e?e(j,k,i):Ea,l===Ea&&(l=A(k,j,e,!0));if(!l)return!1}return!0}function D(a,b){var c=-1,d=$(a)?Array(a.length):[];return Ub(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function E(a){var b=_b(a),c=b.length;if(!c)return Aa(!0);if(1==c){var d=b[0],e=a[d];if(da(e))return function(a){return null==a?!1:a[d]===e&&(e!==Ea||d in fa(a))}}for(var f=Array(c),g=Array(c);c--;)e=a[b[c]],f[c]=e,g[c]=da(e);return function(a){return null!=a&&C(fa(a),b,f,g)}}function F(a,b){var c=Zb(a),d=ba(a)&&da(b),e=a+"";return a=ga(a),function(f){if(null==f)return!1;var g=e;if(f=fa(f),(c||!d)&&!(g in f)){if(f=1==a.length?f:z(f,I(a,0,-1)),null==f)return!1;g=ia(a),f=fa(f)}return f[g]===b?b!==Ea||g in f:A(b,f[g],null,!0)}}function G(a){return function(b){return null==b?Ea:b[a]}}function H(a){var b=a+"";return a=ga(a),function(c){return z(c,a,b)}}function I(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=c===Ea||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function J(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].c;return a}function K(a,b,c){var d=V(),e=-1;b=t(b,function(a){return d(a)});var f=D(a,function(a){var c=t(b,function(b){return b(a)});return{a:c,b:++e,c:a}});return J(f,function(a,b){return i(a,b,c)})}function L(a,b){var c=-1,d=W(),e=a.length,g=d==f,h=g&&e>=200,i=h?Wb():null,j=[];i?(d=o,g=!1):(h=!1,i=b?[]:j);a:for(;++c<e;){var k=a[c],l=b?b(k,c,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else d(i,l,0)<0&&((b||h)&&i.push(l),j.push(k))}return j}function M(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&Pb>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return N(a,b,Ba,c)}function N(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=b===Ea;f>e;){var i=Ab((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||j!==Ea):d?b>=j:b>j;l?e=i+1:f=i}return Mb(f,Ob)}function O(a,b,c){if("function"!=typeof a)return Ba;if(b===Ea)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function P(a){return zb.call(a,0)}function Q(a,b){return function(c,d){var e=c?Xb(c):0;if(!ca(e))return a(c,d);for(var f=b?e:-1,g=fa(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function R(a){return function(b,c,d){for(var e=fa(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function S(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&(!e||i>=j))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=Ea,d&&(k=e?d(m,l,h):d(l,m,h)),k===Ea)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function T(a,b,c){switch(c){case Ia:case Ja:return+a==+b;case Ka:return a.name==b.name&&a.message==b.message;case Na:return a!=+a?b!=+b:a==+b;case Pa:case Ra:return a==b+""}return!1}function U(a,b,c,d,e,f,g){var h=_b(a),i=h.length,j=_b(b),k=j.length;if(i!=k&&!e)return!1;for(var l=e,m=-1;++m<i;){var n=h[m],o=e?n in b:vb.call(b,n);if(o){var p=a[n],q=b[n];o=Ea,d&&(o=e?d(q,p,n):d(p,q,n)),o===Ea&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function V(a,b,c){var d=m.callback||za;return d=d===za?v:d,c?d(a,b,c):d}function W(a,b,c){var d=m.indexOf||ha;return d=d===ha?f:d,a?d(a,b,c):d}function X(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&vb.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Y(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Object),new b}function Z(a,b,c){var d=a.constructor;switch(b){case Ta:return P(a);case Ia:case Ja:return new d(+a);case Ua:case Va:case Wa:case Xa:case Ya:case Za:case $a:case _a:case ab:var e=a.buffer;return new d(c?P(e):e,a.byteOffset,a.length);case Na:case Ra:return new d(a);case Pa:var f=new d(a.source,hb.exec(a));f.lastIndex=a.lastIndex}return f}function $(a){return null!=a&&ca(Xb(a))}function _(a,b){return a=+a,b=null==b?Rb:b,a>-1&&a%1==0&&b>a}function aa(a,b,c){if(!ra(c))return!1;var d=typeof b;if("number"==d?$(c)&&_(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function ba(a,b){var c=typeof a;if("string"==c&&cb.test(a)||"number"==c)return!0;if(Zb(a))return!1;var d=!bb.test(a);return d||null!=b&&a in fa(b)}function ca(a){return"number"==typeof a&&a>-1&&a%1==0&&Rb>=a}function da(a){return a===a&&!ra(a)}function ea(a){for(var b=xa(a),c=b.length,d=c&&a.length,e=m.support,f=d&&ca(d)&&(Zb(a)||e.nonEnumArgs&&oa(a)),g=-1,h=[];++g<c;){var i=b[g];(f&&_(i,d)||vb.call(a,i))&&h.push(i)}return h}function fa(a){return ra(a)?a:Object(a)}function ga(a){if(Zb(a))return a;var b=[];return h(a).replace(db,function(a,c,d,e){b.push(d?e.replace(gb,"$1"):c||a)}),b}function ha(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=0>c?Lb(d+c,0):c;else if(c){var e=M(a,b),g=a[e];return(b===b?b===g:g!==g)?e:-1}return f(a,b,c||0)}function ia(a){var b=a?a.length:0;return b?a[b-1]:Ea}function ja(a,b,c,d){var e=a?a.length:0;if(!e)return[];null!=b&&"boolean"!=typeof b&&(d=c,c=aa(a,b,d)?null:b,b=!1);var g=V();return(g!==v||null!=c)&&(c=g(c,d,3)),b&&W()==f?l(a,c):L(a,c)}function ka(a,b,c){var d=Zb(a)?s:x;return b=V(b,c,3),d(a,b)}function la(a,b,c){var d=Zb(a)?t:D;return b=V(b,c,3),d(a,b)}function ma(a,b,c,d){return null==a?[]:(d&&aa(b,c,d)&&(c=null),Zb(b)||(b=null==b?[]:[b]),Zb(c)||(c=null==c?[]:[c]),K(a,b,c))}function na(a,b,c){return b="function"==typeof b&&O(b,c,1),w(a,!0,b)}function oa(a){return k(a)&&$(a)&&wb.call(a)==Ga}function pa(a){return a===!0||a===!1||k(a)&&wb.call(a)==Ia}function qa(a){return k(a)&&wb.call(a)==Ja}function ra(a){var b=typeof a;return"function"==b||!!a&&"object"==b}function sa(a){return null==a?!1:wb.call(a)==La?xb.test(ub.call(a)):k(a)&&ib.test(a)}function ta(a){return"number"==typeof a||k(a)&&wb.call(a)==Na}function ua(a){return"string"==typeof a||k(a)&&wb.call(a)==Ra}function va(a){return k(a)&&ca(a.length)&&!!jb[wb.call(a)]}function wa(a,b){if(null==a)return!1;var c=vb.call(a,b);return c||ba(b)||(b=ga(b),a=1==b.length?a:z(a,I(b,0,-1)),b=ia(b),c=null!=a&&vb.call(a,b)),c}function xa(a){if(null==a)return[];ra(a)||(a=Object(a));var b=a.length;b=b&&ca(b)&&(Zb(a)||Sb.nonEnumArgs&&oa(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Array(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&_(h,b)||"constructor"==h&&(e||!vb.call(a,h))||f.push(h);return f}function ya(a){return a=h(a),a&&fb.test(a)?a.replace(eb,"\\$&"):a}function za(a,b,c){return c&&aa(a,b,c)&&(b=null),k(a)?Ca(a):v(a,b)}function Aa(a){return function(){return a}}function Ba(a){return a}function Ca(a){return E(w(a,!0))}function Da(a){return ba(a)?G(a):H(a)}var Ea,Fa="3.8.0",Ga="[object Arguments]",Ha="[object Array]",Ia="[object Boolean]",Ja="[object Date]",Ka="[object Error]",La="[object Function]",Ma="[object Map]",Na="[object Number]",Oa="[object Object]",Pa="[object RegExp]",Qa="[object Set]",Ra="[object String]",Sa="[object WeakMap]",Ta="[object ArrayBuffer]",Ua="[object Float32Array]",Va="[object Float64Array]",Wa="[object Int8Array]",Xa="[object Int16Array]",Ya="[object Int32Array]",Za="[object Uint8Array]",$a="[object Uint8ClampedArray]",_a="[object Uint16Array]",ab="[object Uint32Array]",bb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,cb=/^\w*$/,db=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,eb=/[.*+?^${}()|[\]\/\\]/g,fb=RegExp(eb.source),gb=/\\(\\)?/g,hb=/\w*$/,ib=/^\[object .+?Constructor\]$/,jb={};jb[Ua]=jb[Va]=jb[Wa]=jb[Xa]=jb[Ya]=jb[Za]=jb[$a]=jb[_a]=jb[ab]=!0,jb[Ga]=jb[Ha]=jb[Ta]=jb[Ia]=jb[Ja]=jb[Ka]=jb[La]=jb[Ma]=jb[Na]=jb[Oa]=jb[Pa]=jb[Qa]=jb[Ra]=jb[Sa]=!1;var kb={};kb[Ga]=kb[Ha]=kb[Ta]=kb[Ia]=kb[Ja]=kb[Ua]=kb[Va]=kb[Wa]=kb[Xa]=kb[Ya]=kb[Na]=kb[Oa]=kb[Pa]=kb[Ra]=kb[Za]=kb[$a]=kb[_a]=kb[ab]=!0,kb[Ka]=kb[La]=kb[Ma]=kb[Qa]=kb[Sa]=!1;var lb={"function":!0,object:!0},mb=lb[typeof d]&&d&&!d.nodeType&&d,nb=lb[typeof c]&&c&&!c.nodeType&&c,ob=mb&&nb&&"object"==typeof b&&b&&b.Object&&b,pb=lb[typeof self]&&self&&self.Object&&self,qb=lb[typeof window]&&window&&window.Object&&window,rb=nb&&nb.exports===mb&&mb,sb=ob||qb!==(this&&this.window)&&qb||pb||this,tb=Object.prototype,ub=Function.prototype.toString,vb=tb.hasOwnProperty,wb=tb.toString,xb=RegExp("^"+ya(wb).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yb=sa(yb=sb.ArrayBuffer)&&yb,zb=sa(zb=yb&&new yb(0).slice)&&zb,Ab=Math.floor,Bb=sa(Bb=Object.getOwnPropertySymbols)&&Bb,Cb=sa(Cb=Object.preventExtensions)&&Cb,Db=tb.propertyIsEnumerable,Eb=sa(Eb=sb.Set)&&Eb,Fb=sa(Fb=sb.Uint8Array)&&Fb,Gb=function(){try{var a=sa(a=sb.Float64Array)&&a,b=new a(new yb(10),0,1)&&a}catch(c){}return b}(),Hb=function(){var a=Cb&&sa(a=Object.assign)&&a;try{if(a){var b=Cb({1:0});b[0]=1}}catch(c){try{a(b,"xo")}catch(c){}return!b[1]&&a}return!1}(),Ib=sa(Ib=Array.isArray)&&Ib,Jb=sa(Jb=Object.create)&&Jb,Kb=sa(Kb=Object.keys)&&Kb,Lb=Math.max,Mb=Math.min,Nb=Math.pow(2,32)-1,Ob=Nb-1,Pb=Nb>>>1,Qb=Gb?Gb.BYTES_PER_ELEMENT:0,Rb=Math.pow(2,53)-1,Sb=m.support={};!function(a){var b=function(){this.x=a},c=arguments,d=[];b.prototype={valueOf:a,y:a};for(var e in new b)d.push(e);Sb.funcDecomp=/\bthis\b/.test(function(){return this}),Sb.funcNames="string"==typeof Function.name;try{Sb.nonEnumArgs=!Db.call(c,1)}catch(f){Sb.nonEnumArgs=!0}}(1,0);var Tb=Hb||function(a,b){return null==b?a:u(b,Yb(b),u(b,_b(b),a))},Ub=Q(y),Vb=R();zb||(P=yb&&Fb?function(a){var b=a.byteLength,c=Gb?Ab(b/Qb):0,d=c*Qb,e=new yb(b);if(c){var f=new Gb(e,0,c);f.set(new Gb(a,0,c))}return b!=d&&(f=new Fb(e,d),f.set(new Fb(a,d))),e}:Aa(null));var Wb=Jb&&Eb?function(a){return new n(a)}:Aa(null),Xb=G("length"),Yb=Bb?function(a){return Bb(fa(a))}:Aa([]),Zb=Ib||function(a){return k(a)&&ca(a.length)&&wb.call(a)==Ha},$b=g(/x/)||Fb&&!g(Fb)?function(a){return wb.call(a)==La}:g,_b=Kb?function(a){var b=null!=a&&a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&$(a)?ea(a):ra(a)?Kb(a):[]}:ea;n.prototype.push=p,m.callback=za,m.constant=Aa,m.filter=ka,m.keys=_b,m.keysIn=xa,m.map=la,m.matches=Ca,m.property=Da,m.sortByOrder=ma,m.uniq=ja,m.collect=la,m.iteratee=za,m.select=ka,m.unique=ja,m.cloneDeep=na,m.escapeRegExp=ya,m.has=wa,m.identity=Ba,m.indexOf=ha,m.isArguments=oa,m.isArray=Zb,m.isBoolean=pa,m.isDate=qa,m.isFunction=$b,m.isNative=sa,m.isNumber=ta,m.isObject=ra,m.isString=ua,m.isTypedArray=va,m.last=ia,m.VERSION=Fa,"function"==typeof a&&"object"==typeof a.amd&&a.amd?(sb._=m,a(function(){return m})):mb&&nb?rb?(nb.exports=m)._=m:mb._=m:sb._=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){function d(a){return"boolean"==typeof a||"number"==typeof a||"string"==typeof a||null===a||o.isDate(a)||o.isArray(a)}function e(a,b){return b>a?-1:a>b?1:0}function f(a,b){var c,d;for(c=0;c<Math.min(a.length,b.length);c+=1)if(d=g(a[c],b[c]),0!==d)return d;return e(a.length,b.length)}function g(a,b){var c,d,h,i;if(void 0===a)return void 0===b?0:-1;if(void 0===b)return void 0===a?0:1;if(null===a)return null===b?0:-1;if(null===b)return null===a?0:1;if("number"==typeof a)return"number"==typeof b?e(a,b):-1;if("number"==typeof b)return"number"==typeof a?e(a,b):1;if("string"==typeof a)return"string"==typeof b?e(a,b):-1;if("string"==typeof b)return"string"==typeof a?e(a,b):1;if("boolean"==typeof a)return"boolean"==typeof b?e(a,b):-1;if("boolean"==typeof b)return"boolean"==typeof a?e(a,b):1;if(o.isDate(a))return o.isDate(b)?e(a.getTime(),b.getTime()):-1;if(o.isDate(b))return o.isDate(a)?e(a.getTime(),b.getTime()):1;if(o.isArray(a))return o.isArray(b)?f(a,b):-1;if(o.isArray(b))return o.isArray(a)?f(a,b):1;for(c=Object.keys(a).sort(),d=Object.keys(b).sort(),i=0;i<Math.min(c.length,d.length);i+=1)if(h=g(a[c[i]],b[d[i]]),0!==h)return h;return e(c.length,d.length)}function h(a){return function(b,c,d){var e="string"==typeof c?c.split("."):c;1===e.length?q[a](b,c,d):(b[e[0]]=b[e[0]]||{},p[a](b[e[0]],e.slice(1),d))}}function i(a,b){var c,d,e="string"==typeof b?b.split("."):b;if(a){if(0===e.length)return a;if(1===e.length)return a[e[0]];if(o.isArray(a[e[0]])){if(c=parseInt(e[1],10),"number"==typeof c&&!isNaN(c))return i(a[e[0]][c],e.slice(2));for(d=new Array,c=0;c<a[e[0]].length;c+=1)d.push(i(a[e[0]][c],e.slice(1)));return d}return i(a[e[0]],e.slice(1))}}function j(a,b){var c,d,e;if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||null===b||"string"==typeof b||"boolean"==typeof b||"number"==typeof b)return a===b;if(o.isDate(a)||o.isDate(b))return o.isDate(a)&&o.isDate(b)&&a.getTime()===b.getTime();if(o.isArray(a)||o.isArray(b)||void 0===a||void 0===b)return!1;try{c=Object.keys(a),d=Object.keys(b)}catch(f){return!1}if(c.length!==d.length)return!1;for(e=0;e<c.length;e+=1){if(-1===d.indexOf(c[e]))return!1;if(!j(a[c[e]],b[c[e]]))return!1}return!0}function k(a,b){return"string"==typeof a||"number"==typeof a||o.isDate(a)||"string"==typeof b||"number"==typeof b||o.isDate(b)?typeof a==typeof b:!1}function l(a,b){var c,e,f,g;if(d(a)||d(b))return m({needAKey:a},"needAKey",b);for(c=Object.keys(b),g=0;g<c.length;g+=1)if(e=c[g],f=b[e],"$"===e[0]){if(!s[e])throw"Unknown logical operator "+e;if(!s[e](a,f))return!1}else if(!m(a,e,f))return!1;return!0}function m(a,b,c,d){var e,f,g,h,k=i(a,b);if(o.isArray(k)&&!d){if(null!==c&&"object"==typeof c&&!o.isRegExp(c))for(f=Object.keys(c),e=0;e<f.length;e+=1)if(t[f[e]])return m(a,b,c,!0);for(e=0;e<k.length;e+=1)if(m({k:k[e]},"k",c))return!0;return!1}if(null!==c&&"object"==typeof c&&!o.isRegExp(c)){if(f=Object.keys(c),g=n.map(f,function(a){return a[0]}),h=n.filter(g,function(a){return"$"===a}),0!==h.length&&h.length!==g.length)throw"You cannot mix operators and normal fields";if(h.length>0){for(e=0;e<f.length;e+=1){if(!r[f[e]])throw"Unknown comparison function "+f[e];if(!r[f[e]](k,c[f[e]]))return!1}return!0}}return o.isRegExp(c)?r.$regex(k,c):!!j(k,c)}var n=a("./utilities"),o=a("util"),p={},q={},r={},s={},t={};q.$set=function(a,b,c){a[b]=c},q.$unset=function(a,b,c){delete a[b]},q.$push=function(a,b,c){if(a.hasOwnProperty(b)||(a[b]=[]),!o.isArray(a[b]))throw"Can't $push an element on non-array values";if(null!==c&&"object"==typeof c&&c.$each){if(Object.keys(c).length>1)throw"Can't use another field in conjunction with $each";if(!o.isArray(c.$each))throw"$each requires an array value";c.$each.forEach(function(c){a[b].push(c)})}else a[b].push(c)},q.$addToSet=function(a,b,c){var d=!0;if(a.hasOwnProperty(b)||(a[b]=[]),!o.isArray(a[b]))throw"Can't $addToSet an element on non-array values";if(null!==c&&"object"==typeof c&&c.$each){if(Object.keys(c).length>1)throw"Can't use another field in conjunction with $each";if(!o.isArray(c.$each))throw"$each requires an array value";c.$each.forEach(function(c){q.$addToSet(a,b,c)})}else a[b].forEach(function(a){0===g(a,c)&&(d=!1)}),d&&a[b].push(c)},q.$pop=function(a,b,c){if(!o.isArray(a[b]))throw"Can't $pop an element from non-array values";if("number"!=typeof c)throw c+" isn't an integer, can't use it with $pop";0!==c&&(c>0?a[b]=a[b].slice(0,a[b].length-1):a[b]=a[b].slice(1))},q.$pull=function(a,b,c){var d,e;if(!o.isArray(a[b]))throw"Can't $pull an element from non-array values";for(d=a[b],e=d.length-1;e>=0;e-=1)l(d[e],c)&&d.splice(e,1)},q.$inc=function(a,b,c){if("number"!=typeof c)throw c+" must be a number";if("number"!=typeof a[b]){if(n.has(a,b))throw"Don't use the $inc modifier on non-number fields";a[b]=c}else a[b]+=c},Object.keys(q).forEach(function(a){p[a]=h(a)}),r.$lt=function(a,b){return k(a,b)&&b>a},r.$lte=function(a,b){return k(a,b)&&b>=a},r.$gt=function(a,b){return k(a,b)&&a>b},r.$gte=function(a,b){return k(a,b)&&a>=b},r.$ne=function(a,b){return void 0===a?!0:!j(a,b)},r.$in=function(a,b){var c;if(!o.isArray(b))throw"$in operator called with a non-array";for(c=0;c<b.length;c+=1)if(j(a,b[c]))return!0;return!1},r.$nin=function(a,b){if(!o.isArray(b))throw"$nin operator called with a non-array";return!r.$in(a,b)},r.$regex=function(a,b){if(!o.isRegExp(b))throw"$regex operator called with non regular expression";return"string"!=typeof a?!1:b.test(a)},r.$exists=function(a,b){return b=!(!b&&""!==b),void 0===a?!b:b},r.$size=function(a,b){if(!o.isArray(a))return!1;if(b%1!==0)throw"$size operator called without an integer";return a.length==b},t.$size=!0,s.$or=function(a,b){var c;if(!o.isArray(b))throw"$or operator used without an array";for(c=0;c<b.length;c+=1)if(l(a,b[c]))return!0;return!1},s.$and=function(a,b){var c;if(!o.isArray(b))throw"$and operator used without an array";for(c=0;c<b.length;c+=1)if(!l(a,b[c]))return!1;return!0},s.$not=function(a,b){return!l(a,b)},s.$where=function(a,b){var c;if(!n.isFunction(b))throw"$where operator used without a function";if(c=b.call(a),!n.isBoolean(c))throw"$where function must return boolean";return c},Match=function(a,b){this.options=a?a:{},this.eventEmitter=b?this.eventEmitter:null},Match.prototype.search=function(a,b,c){var d=[];return d=Array.isArray(c)?b.getItemsFromResults(c):b.items,a.query&&(d=d.filter(function(b){return l(b,a.query)})),d.map(function(a){return{ref:a.id}})},b.exports=Match},{"./utilities":9,util:15}],8:[function(a,b,c){function d(a,b,c){this.options=a?a:{};var d={documents:[]};if(Array.isArray(c)?d.documents=b.getItemsFromResults(c):d.documents=b.items,this.options&&Array.isArray(d.documents)){d.info={itemCount:g(d.documents)};var i=k.reach(this.options,"startAt"),j=k.reach(this.options,"limit"),l=k.reach(this.options,"sort");l&&(void 0===l.reverse&&(l.reverse=!1),d.documents=h(l,d.documents)),k.isNumber(i)&&i<d.info.itemCount&&(d.info.startAt=i,d.documents=e(i,d.documents)),k.isNumber(j)&&(j<d.documents.length&&(d.info.limit=j,d.documents=f(j,d.documents)),d.info.pageCount=Math.ceil(d.info.itemCount/j),i&&(d.info.page=Math.ceil(i/j))),d.documents=d.documents}return d}function e(a,b){return k.isNumber(a)&&a>1&&Array.isArray(b)?(a=parseInt(a,10),b.slice(a-1)):[]}function f(a,b){return k.isNumber(a)&&Array.isArray(b)?(a=parseInt(a,10),b.slice(0,a)):[]}function g(a){return Array.isArray(a)?a.length:0}function h(a,b){return a&&Array.isArray(b)?i(b,a.path,a.reverse):[]}function i(a,b,c,d){return a.sort(j(b,c,d))}function j(a,b,c){return b=b===!0?-1:1,function(d,e){return d=k.reach(d,a),e=k.reach(e,a),k.isDate(d)&&(d=d.getTime()),k.isDate(e)&&(e=e.getTime()),void 0!==c&&void 0!==d&&void 0!==e&&(d=c(d),e=c(e)),e>d?-1*b:d>e?1*b:0}}var k=a("./utilities");c.page=d,c._startAt=e,c._limit=f,c._size=g,c._sort=h},{"./utilities":9}],9:[function(a,b,c){var d=a("./lodash.custom.min.js");b.exports={cloneDeep:function(a){return d.cloneDeep.apply(this,arguments)},map:function(a){return d.map.apply(this,arguments)},filter:function(a){return d.filter.apply(this,arguments)},uniq:function(a){return d.uniq.apply(this,arguments)},sortByOrder:function(a){return d.sortByOrder.apply(this,arguments)},isNumber:function(a){return d.isNumber.apply(this,arguments)},isString:function(a){return d.isString.apply(this,arguments)},isFunction:function(a){return d.isFunction.apply(this,arguments)},isBoolean:function(a){return d.isBoolean.apply(this,arguments)},isDate:function(a){return d.isDate.apply(this,arguments)},has:function(a){return d.has.apply(this,arguments)},reach:function(a,b,c){c=c||{},"string"==typeof c&&(c={separator:c});for(var d=b.split(c.separator||"."),e=a,f=0,g=d.length;g>f;++f){var h=d[f];if("-"===h[0]&&Array.isArray(e)&&(h=h.slice(1,h.length),h=e.length-h),!e||!e.hasOwnProperty(h)||"object"!=typeof e&&c.functions===!1){e=c["default"];break}e=e[h]}return e}}},{"./lodash.custom.min.js":6}],10:[function(b,c,d){!function(b,d){"use strict";function e(){}e.TO_RAD=Math.PI/180,e.TO_DEG=180/Math.PI,e.PI_X2=2*Math.PI,e.PI_DIV4=Math.PI/4;var f=Object.create(e.prototype,{version:{value:"2.0.21"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},"in":{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:e.prototype},extend:{value:function(a,b){for(var c in a)"undefined"!=typeof f.prototype[c]&&b!==!0||("function"==typeof a[c]&&"function"==typeof a[c].bind?f.prototype[c]=a[c].bind(f):f.prototype[c]=a[c])}}});"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*e.TO_RAD}),"undefined"==typeof Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*e.TO_DEG}),f.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(a){if("[object Array]"==Object.prototype.toString.call(a))return{
longitude:a.length>=1?0:d,latitude:a.length>=2?1:d,elevation:a.length>=3?2:d};var b=function(b){var c;return b.every(function(b){return"object"!=typeof a?!0:a.hasOwnProperty(b)?function(){return c=b,!1}():!0}),c},c=b(["lng","lon","longitude"]),e=b(["lat","latitude"]),f=b(["alt","altitude","elevation","elev"]);return"undefined"==typeof e&&"undefined"==typeof c&&"undefined"==typeof f?d:{latitude:e,longitude:c,elevation:f}},getLat:function(a,b){return b===!0?a[this.getKeys(a).latitude]:this.useDecimal(a[this.getKeys(a).latitude])},latitude:function(a){return this.getLat.call(this,a)},getLon:function(a,b){return b===!0?a[this.getKeys(a).longitude]:this.useDecimal(a[this.getKeys(a).longitude])},longitude:function(a){return this.getLon.call(this,a)},getElev:function(a){return a[this.getKeys(a).elevation]},elevation:function(a){return this.getElev.call(this,a)},coords:function(a,b){var c={latitude:b===!0?a[this.getKeys(a).latitude]:this.useDecimal(a[this.getKeys(a).latitude]),longitude:b===!0?a[this.getKeys(a).longitude]:this.useDecimal(a[this.getKeys(a).longitude])},d=a[this.getKeys(a).elevation];return"undefined"!=typeof d&&(c.elevation=d),c},ll:function(a,b){return this.coords.call(this,a,b)},validate:function(a){var b=this.getKeys(a);if("undefined"==typeof b||"undefined"==typeof b.latitude||"undefined"===b.longitude)return!1;var c=a[b.latitude],d=a[b.longitude];return"undefined"==typeof c||!this.isDecimal(c)&&!this.isSexagesimal(c)?!1:"undefined"==typeof d||!this.isDecimal(d)&&!this.isSexagesimal(d)?!1:(c=this.useDecimal(c),d=this.useDecimal(d),!(c<this.minLat||c>this.maxLat||d<this.minLon||d>this.maxLon))},getDistance:function(a,b,c,d){c=Math.floor(c)||1,d=Math.floor(d)||0;var e,g,h,i,j,k,l,m=this.coords(a),n=this.coords(b),o=6378137,p=6356752.314245,q=1/298.257223563,r=(n.longitude-m.longitude).toRad(),s=Math.atan((1-q)*Math.tan(parseFloat(m.latitude).toRad())),t=Math.atan((1-q)*Math.tan(parseFloat(n.latitude).toRad())),u=Math.sin(s),v=Math.cos(s),w=Math.sin(t),x=Math.cos(t),y=r,z=100;do{var A=Math.sin(y),B=Math.cos(y);if(k=Math.sqrt(x*A*(x*A)+(v*w-u*x*B)*(v*w-u*x*B)),0===k)return f.distance=0;e=u*w+v*x*B,g=Math.atan2(k,e),h=v*x*A/k,i=1-h*h,j=e-2*u*w/i,isNaN(j)&&(j=0);var C=q/16*i*(4+q*(4-3*i));l=y,y=r+(1-C)*q*h*(g+C*k*(j+C*e*(-1+2*j*j)))}while(Math.abs(y-l)>1e-12&&--z>0);if(0===z)return NaN;var D=i*(o*o-p*p)/(p*p),E=1+D/16384*(4096+D*(-768+D*(320-175*D))),F=D/1024*(256+D*(-128+D*(74-47*D))),G=F*k*(j+F/4*(e*(-1+2*j*j)-F/6*j*(-3+4*k*k)*(-3+4*j*j))),H=p*E*(g-G);if(H=H.toFixed(d),"undefined"!=typeof this.elevation(a)&&"undefined"!=typeof this.elevation(b)){var I=Math.abs(this.elevation(a)-this.elevation(b));H=Math.sqrt(H*H+I*I)}return this.distance=parseFloat((Math.round(H/c)*c).toFixed(d))},getDistanceSimple:function(a,b,c){c=Math.floor(c)||1;var d=Math.round(Math.acos(Math.sin(this.latitude(b).toRad())*Math.sin(this.latitude(a).toRad())+Math.cos(this.latitude(b).toRad())*Math.cos(this.latitude(a).toRad())*Math.cos(this.longitude(a).toRad()-this.longitude(b).toRad()))*this.radius);return f.distance=Math.floor(Math.round(d/c)*c)},getCenter:function(a){var b=a;if("object"==typeof a&&!(a instanceof Array)){b=[];for(var c in a)b.push(this.coords(a[c]))}if(!b.length)return!1;var d,f,g,h=0,i=0,j=0;b.forEach(function(a){d=this.latitude(a).toRad(),f=this.longitude(a).toRad(),h+=Math.cos(d)*Math.cos(f),i+=Math.cos(d)*Math.sin(f),j+=Math.sin(d)},this);var k=b.length;return h/=k,i/=k,j/=k,f=Math.atan2(i,h),g=Math.sqrt(h*h+i*i),d=Math.atan2(j,g),{latitude:(d*e.TO_DEG).toFixed(6),longitude:(f*e.TO_DEG).toFixed(6)}},getBounds:function(a){if(!a.length)return!1;var b=this.elevation(a[0]),c={maxLat:-(1/0),minLat:1/0,maxLng:-(1/0),minLng:1/0};"undefined"!=typeof b&&(c.maxElev=0,c.minElev=1/0);for(var d=0,e=a.length;e>d;++d)c.maxLat=Math.max(this.latitude(a[d]),c.maxLat),c.minLat=Math.min(this.latitude(a[d]),c.minLat),c.maxLng=Math.max(this.longitude(a[d]),c.maxLng),c.minLng=Math.min(this.longitude(a[d]),c.minLng),b&&(c.maxElev=Math.max(this.elevation(a[d]),c.maxElev),c.minElev=Math.min(this.elevation(a[d]),c.minElev));return c},getCenterOfBounds:function(a){var b=this.getBounds(a),c=b.minLat+(b.maxLat-b.minLat)/2,d=b.minLng+(b.maxLng-b.minLng)/2;return{latitude:parseFloat(c.toFixed(6)),longitude:parseFloat(d.toFixed(6))}},getBoundsOfDistance:function(a,b){var c,d,f=this.latitude(a),g=this.longitude(a),h=f.toRad(),i=g.toRad(),j=b/this.radius,k=h-j,l=h+j,m=this.maxLat.toRad(),n=this.minLat.toRad(),o=this.maxLon.toRad(),p=this.minLon.toRad();if(k>n&&m>l){var q=Math.asin(Math.sin(j)/Math.cos(h));c=i-q,p>c&&(c+=e.PI_X2),d=i+q,d>o&&(d-=e.PI_X2)}else k=Math.max(k,n),l=Math.min(l,m),c=p,d=o;return[{latitude:k.toDeg(),longitude:c.toDeg()},{latitude:l.toDeg(),longitude:d.toDeg()}]},isPointInside:function(a,b){for(var c=!1,d=-1,e=b.length,f=e-1;++d<e;f=d)(this.longitude(b[d])<=this.longitude(a)&&this.longitude(a)<this.longitude(b[f])||this.longitude(b[f])<=this.longitude(a)&&this.longitude(a)<this.longitude(b[d]))&&this.latitude(a)<(this.latitude(b[f])-this.latitude(b[d]))*(this.longitude(a)-this.longitude(b[d]))/(this.longitude(b[f])-this.longitude(b[d]))+this.latitude(b[d])&&(c=!c);return c},preparePolygonForIsPointInsideOptimized:function(a){for(var b=0,c=a.length-1;b<a.length;b++)this.longitude(a[c])===this.longitude(a[b])?(a[b].constant=this.latitude(a[b]),a[b].multiple=0):(a[b].constant=this.latitude(a[b])-this.longitude(a[b])*this.latitude(a[c])/(this.longitude(a[c])-this.longitude(a[b]))+this.longitude(a[b])*this.latitude(a[b])/(this.longitude(a[c])-this.longitude(a[b])),a[b].multiple=(this.latitude(a[c])-this.latitude(a[b]))/(this.longitude(a[c])-this.longitude(a[b]))),c=b},isPointInsideWithPreparedPolygon:function(a,b){for(var c=!1,d=this.longitude(a),e=this.latitude(a),f=0,g=b.length-1;f<b.length;f++)(this.longitude(b[f])<d&&this.longitude(b[g])>=d||this.longitude(b[g])<d&&this.longitude(b[f])>=d)&&(c^=d*b[f].multiple+b[f].constant<e),g=f;return c},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(a,b,c){return this.getDistance(a,b)<c},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(a,b){var c=this.longitude(b).toRad()-this.longitude(a).toRad(),d=Math.log(Math.tan(this.latitude(b).toRad()/2+e.PI_DIV4)/Math.tan(this.latitude(a).toRad()/2+e.PI_DIV4));return Math.abs(c)>Math.PI&&(c=c>0?-1*(e.PI_X2-c):e.PI_X2+c),(Math.atan2(c,d).toDeg()+360)%360},getBearing:function(a,b){b.latitude=this.latitude(b),b.longitude=this.longitude(b),a.latitude=this.latitude(a),a.longitude=this.longitude(a);var c=(Math.atan2(Math.sin(b.longitude.toRad()-a.longitude.toRad())*Math.cos(b.latitude.toRad()),Math.cos(a.latitude.toRad())*Math.sin(b.latitude.toRad())-Math.sin(a.latitude.toRad())*Math.cos(b.latitude.toRad())*Math.cos(b.longitude.toRad()-a.longitude.toRad())).toDeg()+360)%360;return c},getCompassDirection:function(a,b,c){var d,e;switch(e="circle"==c?this.getBearing(a,b):this.getRhumbLineBearing(a,b),Math.round(e/22.5)){case 1:d={exact:"NNE",rough:"N"};break;case 2:d={exact:"NE",rough:"N"};break;case 3:d={exact:"ENE",rough:"E"};break;case 4:d={exact:"E",rough:"E"};break;case 5:d={exact:"ESE",rough:"E"};break;case 6:d={exact:"SE",rough:"E"};break;case 7:d={exact:"SSE",rough:"S"};break;case 8:d={exact:"S",rough:"S"};break;case 9:d={exact:"SSW",rough:"S"};break;case 10:d={exact:"SW",rough:"S"};break;case 11:d={exact:"WSW",rough:"W"};break;case 12:d={exact:"W",rough:"W"};break;case 13:d={exact:"WNW",rough:"W"};break;case 14:d={exact:"NW",rough:"W"};break;case 15:d={exact:"NNW",rough:"N"};break;default:d={exact:"N",rough:"N"}}return d.bearing=e,d},getDirection:function(a,b,c){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(a,b){var c=[];for(var d in b){var e=this.getDistance(a,b[d]),f=Object(b[d]);f.distance=e,f.key=d,c.push(f)}return c.sort(function(a,b){return a.distance-b.distance})},isPointInLine:function(a,b,c){return this.getDistance(b,a,1,3)+this.getDistance(a,c,1,3)==this.getDistance(b,c,1,3)},isPointNearLine:function(a,b,c,d){return this.getDistanceFromLine(a,b,c)<d},getDistanceFromLine:function(a,b,c){var d=this.getDistance(b,a,1,3),e=this.getDistance(a,c,1,3),f=this.getDistance(b,c,1,3),g=0,h=Math.acos((d*d+f*f-e*e)/(2*d*f)),i=Math.acos((e*e+f*f-d*d)/(2*e*f));return g=h>Math.PI/2?d:i>Math.PI/2?e:Math.sin(h)/d},findNearest:function(a,b,c,d){c=c||0,d=d||1;var e=this.orderByDistance(a,b);return 1===d?e[c]:e.splice(c,d)},getPathLength:function(a){for(var b,c=0,d=0,e=a.length;e>d;++d)b&&(c+=this.getDistance(this.coords(a[d]),b)),b=this.coords(a[d]);return c},getSpeed:function(a,b,c){var d=c&&c.unit||"km";"mph"==d?d="mi":"kmh"==d&&(d="km");var e=f.getDistance(a,b),g=1*b.time/1e3-1*a.time/1e3,h=e/g*3600,i=Math.round(h*this.measures[d]*1e4)/1e4;return i},computeDestinationPoint:function(a,b,c,d){var e=this.latitude(a),f=this.longitude(a);d="undefined"==typeof d?this.radius:Number(d);var g=Number(b)/d,h=Number(c).toRad(),i=Number(e).toRad(),j=Number(f).toRad(),k=Math.asin(Math.sin(i)*Math.cos(g)+Math.cos(i)*Math.sin(g)*Math.cos(h)),l=j+Math.atan2(Math.sin(h)*Math.sin(g)*Math.cos(i),Math.cos(g)-Math.sin(i)*Math.sin(k));return l=(l+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:k.toDeg(),longitude:l.toDeg()}},convertUnit:function(a,b,c){if(0===b)return 0;if("undefined"==typeof b){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;b=this.distance}if(a=a||"m",c=null==c?4:c,"undefined"!=typeof this.measures[a])return this.round(b*this.measures[a],c);throw new Error("Unknown unit for conversion.")},useDecimal:function(a){if("[object Array]"===Object.prototype.toString.call(a)){var b=this;return a=a.map(function(a){if(b.isDecimal(a))return b.useDecimal(a);if("object"==typeof a){if(b.validate(a))return b.coords(a);for(var c in a)a[c]=b.useDecimal(a[c]);return a}return b.isSexagesimal(a)?b.sexagesimal2decimal(a):a})}if("object"==typeof a&&this.validate(a))return this.coords(a);if("object"==typeof a){for(var c in a)a[c]=this.useDecimal(a[c]);return a}if(this.isDecimal(a))return parseFloat(a);if(this.isSexagesimal(a)===!0)return parseFloat(this.sexagesimal2decimal(a));throw new Error("Unknown format.")},decimal2sexagesimal:function(a){if(a in this.sexagesimal)return this.sexagesimal[a];var b=a.toString().split("."),c=Math.abs(b[0]),d=60*("0."+(b[1]||0)),e=d.toString().split(".");return d=Math.floor(d),e=(60*("0."+(e[1]||0))).toFixed(2),this.sexagesimal[a]=c+"° "+d+"' "+e+'"',this.sexagesimal[a]},sexagesimal2decimal:function(a){if(a in this.decimal)return this.decimal[a];var b=new RegExp(this.sexagesimalPattern),c=b.exec(a),d=0,e=0;c&&(d=parseFloat(c[2]/60),e=parseFloat(c[4]/3600)||0);var f=(parseFloat(c[1])+d+e).toFixed(8);return f="S"==c[7]||"W"==c[7]?parseFloat(-f):parseFloat(f),this.decimal[a]=f,f},isDecimal:function(a){return a=a.toString().replace(/\s*/,""),!isNaN(parseFloat(a))&&parseFloat(a)==a},isSexagesimal:function(a){return a=a.toString().replace(/\s*/,""),this.sexagesimalPattern.test(a)},round:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}}),"undefined"!=typeof c&&"undefined"!=typeof c.exports?(c.exports=f,"object"==typeof b&&(b.geolib=f)):"function"==typeof a&&a.amd?a("geolib",[],function(){return f}):b.geolib=f}(this)},{}],11:[function(b,c,d){!function(){var b=function(a){var c=new b.Index;return c.pipeline.add(b.trimmer,b.stopWordFilter,b.stemmer),a&&a.call(c,c),c};b.version="0.5.8",b.utils={},b.utils.warn=function(a){return function(b){a.console&&console.warn&&console.warn(b)}}(this),b.EventEmitter=function(){this.events={}},b.EventEmitter.prototype.addListener=function(){var a=Array.prototype.slice.call(arguments),b=a.pop(),c=a;if("function"!=typeof b)throw new TypeError("last argument must be a function");c.forEach(function(a){this.hasHandler(a)||(this.events[a]=[]),this.events[a].push(b)},this)},b.EventEmitter.prototype.removeListener=function(a,b){if(this.hasHandler(a)){var c=this.events[a].indexOf(b);this.events[a].splice(c,1),this.events[a].length||delete this.events[a]}},b.EventEmitter.prototype.emit=function(a){if(this.hasHandler(a)){var b=Array.prototype.slice.call(arguments,1);this.events[a].forEach(function(a){a.apply(void 0,b)})}},b.EventEmitter.prototype.hasHandler=function(a){return a in this.events},b.tokenizer=function(a){return arguments.length&&null!=a&&void 0!=a?Array.isArray(a)?a.map(function(a){return a.toLowerCase()}):a.toString().trim().toLowerCase().split(/[\s\-]+/):[]},b.Pipeline=function(){this._stack=[]},b.Pipeline.registeredFunctions={},b.Pipeline.registerFunction=function(a,c){c in this.registeredFunctions&&b.utils.warn("Overwriting existing registered function: "+c),a.label=c,b.Pipeline.registeredFunctions[a.label]=a},b.Pipeline.warnIfFunctionNotRegistered=function(a){var c=a.label&&a.label in this.registeredFunctions;c||b.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",a)},b.Pipeline.load=function(a){var c=new b.Pipeline;return a.forEach(function(a){var d=b.Pipeline.registeredFunctions[a];if(!d)throw new Error("Cannot load un-registered function: "+a);c.add(d)}),c},b.Pipeline.prototype.add=function(){var a=Array.prototype.slice.call(arguments);a.forEach(function(a){b.Pipeline.warnIfFunctionNotRegistered(a),this._stack.push(a)},this)},b.Pipeline.prototype.after=function(a,c){b.Pipeline.warnIfFunctionNotRegistered(c);var d=this._stack.indexOf(a)+1;this._stack.splice(d,0,c)},b.Pipeline.prototype.before=function(a,c){b.Pipeline.warnIfFunctionNotRegistered(c);var d=this._stack.indexOf(a);this._stack.splice(d,0,c)},b.Pipeline.prototype.remove=function(a){var b=this._stack.indexOf(a);this._stack.splice(b,1)},b.Pipeline.prototype.run=function(a){for(var b=[],c=a.length,d=this._stack.length,e=0;c>e;e++){for(var f=a[e],g=0;d>g&&(f=this._stack[g](f,e,a),void 0!==f);g++);void 0!==f&&b.push(f)}return b},b.Pipeline.prototype.reset=function(){this._stack=[]},b.Pipeline.prototype.toJSON=function(){return this._stack.map(function(a){return b.Pipeline.warnIfFunctionNotRegistered(a),a.label})},b.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},b.Vector.Node=function(a,b,c){this.idx=a,this.val=b,this.next=c},b.Vector.prototype.insert=function(a,c){this._magnitude=void 0;var d=this.list;if(!d)return this.list=new b.Vector.Node(a,c,d),this.length++;if(a<d.idx)return this.list=new b.Vector.Node(a,c,d),this.length++;for(var e=d,f=d.next;void 0!=f;){if(a<f.idx)return e.next=new b.Vector.Node(a,c,f),this.length++;e=f,f=f.next}return e.next=new b.Vector.Node(a,c,f),this.length++},b.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var a,b=this.list,c=0;b;)a=b.val,c+=a*a,b=b.next;return this._magnitude=Math.sqrt(c)},b.Vector.prototype.dot=function(a){for(var b=this.list,c=a.list,d=0;b&&c;)b.idx<c.idx?b=b.next:b.idx>c.idx?c=c.next:(d+=b.val*c.val,b=b.next,c=c.next);return d},b.Vector.prototype.similarity=function(a){return this.dot(a)/(this.magnitude()*a.magnitude())},b.SortedSet=function(){this.length=0,this.elements=[]},b.SortedSet.load=function(a){var b=new this;return b.elements=a,b.length=a.length,b},b.SortedSet.prototype.add=function(){var a,b;for(a=0;a<arguments.length;a++)b=arguments[a],~this.indexOf(b)||this.elements.splice(this.locationFor(b),0,b);this.length=this.elements.length},b.SortedSet.prototype.toArray=function(){return this.elements.slice()},b.SortedSet.prototype.map=function(a,b){return this.elements.map(a,b)},b.SortedSet.prototype.forEach=function(a,b){return this.elements.forEach(a,b)},b.SortedSet.prototype.indexOf=function(a,b,c){var b=b||0,c=c||this.elements.length,d=c-b,e=b+Math.floor(d/2),f=this.elements[e];return 1>=d?f===a?e:-1:a>f?this.indexOf(a,e,c):f>a?this.indexOf(a,b,e):f===a?e:void 0},b.SortedSet.prototype.locationFor=function(a,b,c){var b=b||0,c=c||this.elements.length,d=c-b,e=b+Math.floor(d/2),f=this.elements[e];if(1>=d){if(f>a)return e;if(a>f)return e+1}return a>f?this.locationFor(a,e,c):f>a?this.locationFor(a,b,e):void 0},b.SortedSet.prototype.intersect=function(a){for(var c=new b.SortedSet,d=0,e=0,f=this.length,g=a.length,h=this.elements,i=a.elements;;){if(d>f-1||e>g-1)break;h[d]!==i[e]?h[d]<i[e]?d++:h[d]>i[e]&&e++:(c.add(h[d]),d++,e++)}return c},b.SortedSet.prototype.clone=function(){var a=new b.SortedSet;return a.elements=this.toArray(),a.length=a.elements.length,a},b.SortedSet.prototype.union=function(a){var b,c,d;return this.length>=a.length?(b=this,c=a):(b=a,c=this),d=b.clone(),d.add.apply(d,c.toArray()),d},b.SortedSet.prototype.toJSON=function(){return this.toArray()},b.Index=function(){this._fields=[],this._ref="id",this.pipeline=new b.Pipeline,this.documentStore=new b.Store,this.tokenStore=new b.TokenStore,this.corpusTokens=new b.SortedSet,this.eventEmitter=new b.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},b.Index.prototype.on=function(){var a=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,a)},b.Index.prototype.off=function(a,b){return this.eventEmitter.removeListener(a,b)},b.Index.load=function(a){a.version!==b.version&&b.utils.warn("version mismatch: current "+b.version+" importing "+a.version);var c=new this;return c._fields=a.fields,c._ref=a.ref,c.documentStore=b.Store.load(a.documentStore),c.tokenStore=b.TokenStore.load(a.tokenStore),c.corpusTokens=b.SortedSet.load(a.corpusTokens),c.pipeline=b.Pipeline.load(a.pipeline),c},b.Index.prototype.field=function(a,b){var b=b||{},c={name:a,boost:b.boost||1};return this._fields.push(c),this},b.Index.prototype.ref=function(a){return this._ref=a,this},b.Index.prototype.add=function(a,c){var d={},e=new b.SortedSet,f=a[this._ref],c=void 0===c?!0:c;this._fields.forEach(function(c){var f=this.pipeline.run(b.tokenizer(a[c.name]));d[c.name]=f,b.SortedSet.prototype.add.apply(e,f)},this),this.documentStore.set(f,e),b.SortedSet.prototype.add.apply(this.corpusTokens,e.toArray());for(var g=0;g<e.length;g++){var h=e.elements[g],i=this._fields.reduce(function(a,b){var c=d[b.name].length;if(!c)return a;var e=d[b.name].filter(function(a){return a===h}).length;return a+e/c*b.boost},0);this.tokenStore.add(h,{ref:f,tf:i})}c&&this.eventEmitter.emit("add",a,this)},b.Index.prototype.remove=function(a,b){var c=a[this._ref],b=void 0===b?!0:b;if(this.documentStore.has(c)){var d=this.documentStore.get(c);this.documentStore.remove(c),d.forEach(function(a){this.tokenStore.remove(a,c)},this),b&&this.eventEmitter.emit("remove",a,this)}},b.Index.prototype.update=function(a,b){var b=void 0===b?!0:b;this.remove(a,!1),this.add(a,!1),b&&this.eventEmitter.emit("update",a,this)},b.Index.prototype.idf=function(a){var b="@"+a;if(Object.prototype.hasOwnProperty.call(this._idfCache,b))return this._idfCache[b];var c=this.tokenStore.count(a),d=1;return c>0&&(d=1+Math.log(this.tokenStore.length/c)),this._idfCache[b]=d},b.Index.prototype.search=function(a){var c=this.pipeline.run(b.tokenizer(a)),d=new b.Vector,e=[],f=this._fields.reduce(function(a,b){return a+b.boost},0),g=c.some(function(a){return this.tokenStore.has(a)},this);if(!g)return[];c.forEach(function(a,c,g){var h=1/g.length*this._fields.length*f,i=this,j=this.tokenStore.expand(a).reduce(function(c,e){var f=i.corpusTokens.indexOf(e),g=i.idf(e),j=1,k=new b.SortedSet;if(e!==a){var l=Math.max(3,e.length-a.length);j=1/Math.log(l)}return f>-1&&d.insert(f,h*g*j),Object.keys(i.tokenStore.get(e)).forEach(function(a){k.add(a)}),c.union(k)},new b.SortedSet);e.push(j)},this);var h=e.reduce(function(a,b){return a.intersect(b)});return h.map(function(a){return{ref:a,score:d.similarity(this.documentVector(a))}},this).sort(function(a,b){return b.score-a.score})},b.Index.prototype.documentVector=function(a){for(var c=this.documentStore.get(a),d=c.length,e=new b.Vector,f=0;d>f;f++){var g=c.elements[f],h=this.tokenStore.get(g)[a].tf,i=this.idf(g);e.insert(this.corpusTokens.indexOf(g),h*i)}return e},b.Index.prototype.toJSON=function(){return{version:b.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},b.Index.prototype.use=function(a){var b=Array.prototype.slice.call(arguments,1);b.unshift(this),a.apply(this,b)},b.Store=function(){this.store={},this.length=0},b.Store.load=function(a){var c=new this;return c.length=a.length,c.store=Object.keys(a.store).reduce(function(c,d){return c[d]=b.SortedSet.load(a.store[d]),c},{}),c},b.Store.prototype.set=function(a,b){this.has(a)||this.length++,this.store[a]=b},b.Store.prototype.get=function(a){return this.store[a]},b.Store.prototype.has=function(a){return a in this.store},b.Store.prototype.remove=function(a){this.has(a)&&(delete this.store[a],this.length--)},b.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},b.stemmer=function(){var a={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},b={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},c="[^aeiou]",d="[aeiouy]",e=c+"[^aeiouy]*",f=d+"[aeiou]*",g="^("+e+")?"+f+e,h="^("+e+")?"+f+e+"("+f+")?$",i="^("+e+")?"+f+e+f+e,j="^("+e+")?"+d,k=new RegExp(g),l=new RegExp(i),m=new RegExp(h),n=new RegExp(j),o=/^(.+?)(ss|i)es$/,p=/^(.+?)([^s])s$/,q=/^(.+?)eed$/,r=/^(.+?)(ed|ing)$/,s=/.$/,t=/(at|bl|iz)$/,u=new RegExp("([^aeiouylsz])\\1$"),v=new RegExp("^"+e+d+"[^aeiouwxy]$"),w=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,y=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,z=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,A=/^(.+?)(s|t)(ion)$/,B=/^(.+?)e$/,C=/ll$/,D=new RegExp("^"+e+d+"[^aeiouwxy]$"),E=function(c){var d,e,f,g,h,i,j;if(c.length<3)return c;if(f=c.substr(0,1),"y"==f&&(c=f.toUpperCase()+c.substr(1)),g=o,h=p,g.test(c)?c=c.replace(g,"$1$2"):h.test(c)&&(c=c.replace(h,"$1$2")),g=q,h=r,g.test(c)){var E=g.exec(c);g=k,g.test(E[1])&&(g=s,c=c.replace(g,""))}else if(h.test(c)){var E=h.exec(c);d=E[1],h=n,h.test(d)&&(c=d,h=t,i=u,j=v,h.test(c)?c+="e":i.test(c)?(g=s,c=c.replace(g,"")):j.test(c)&&(c+="e"))}if(g=w,g.test(c)){var E=g.exec(c);d=E[1],c=d+"i"}if(g=x,g.test(c)){var E=g.exec(c);d=E[1],e=E[2],g=k,g.test(d)&&(c=d+a[e])}if(g=y,g.test(c)){var E=g.exec(c);d=E[1],e=E[2],g=k,g.test(d)&&(c=d+b[e])}if(g=z,h=A,g.test(c)){var E=g.exec(c);d=E[1],g=l,g.test(d)&&(c=d)}else if(h.test(c)){var E=h.exec(c);d=E[1]+E[2],h=l,h.test(d)&&(c=d)}if(g=B,g.test(c)){var E=g.exec(c);d=E[1],g=l,h=m,i=D,(g.test(d)||h.test(d)&&!i.test(d))&&(c=d)}return g=C,h=l,g.test(c)&&h.test(c)&&(g=s,c=c.replace(g,"")),"y"==f&&(c=f.toLowerCase()+c.substr(1)),c};return E}(),b.Pipeline.registerFunction(b.stemmer,"stemmer"),b.stopWordFilter=function(a){return-1===b.stopWordFilter.stopWords.indexOf(a)?a:void 0},b.stopWordFilter.stopWords=new b.SortedSet,b.stopWordFilter.stopWords.length=119,b.stopWordFilter.stopWords.elements=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],b.Pipeline.registerFunction(b.stopWordFilter,"stopWordFilter"),b.trimmer=function(a){return a.replace(/^\W+/,"").replace(/\W+$/,"")},b.Pipeline.registerFunction(b.trimmer,"trimmer"),b.TokenStore=function(){this.root={docs:{}},this.length=0},b.TokenStore.load=function(a){var b=new this;return b.root=a.root,b.length=a.length,b},b.TokenStore.prototype.add=function(a,b,c){var c=c||this.root,d=a[0],e=a.slice(1);return d in c||(c[d]={docs:{}}),0===e.length?(c[d].docs[b.ref]=b,void(this.length+=1)):this.add(e,b,c[d])},b.TokenStore.prototype.has=function(a){if(!a)return!1;for(var b=this.root,c=0;c<a.length;c++){if(!b[a[c]])return!1;b=b[a[c]]}return!0},b.TokenStore.prototype.getNode=function(a){if(!a)return{};for(var b=this.root,c=0;c<a.length;c++){if(!b[a[c]])return{};b=b[a[c]]}return b},b.TokenStore.prototype.get=function(a,b){return this.getNode(a,b).docs||{}},b.TokenStore.prototype.count=function(a,b){return Object.keys(this.get(a,b)).length},b.TokenStore.prototype.remove=function(a,b){if(a){for(var c=this.root,d=0;d<a.length;d++){if(!(a[d]in c))return;c=c[a[d]]}delete c.docs[b]}},b.TokenStore.prototype.expand=function(a,b){var c=this.getNode(a),d=c.docs||{},b=b||[];return Object.keys(d).length&&b.push(a),Object.keys(c).forEach(function(c){"docs"!==c&&b.concat(this.expand(a+c,b))},this),b},b.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(b,e){"function"==typeof a&&a.amd?a(e):"object"==typeof d?c.exports=e():b.lunr=e()}(this,function(){return b})}()},{}],12:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],13:[function(a,b,c){function d(){if(!h){h=!0;for(var a,b=g.length;b;){a=g,g=[];for(var c=-1;++c<b;)a[c]();b=g.length}h=!1}}function e(){}var f=b.exports={},g=[],h=!1;f.nextTick=function(a){g.push(a),h||setTimeout(d,0)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=e,f.addListener=e,f.once=e,f.off=e,f.removeListener=e,f.removeAllListeners=e,f.emit=e,f.binding=function(a){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(a){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],14:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],15:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],
magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":14,_process:13,inherits:12}]},{},[5])(5)});
//# sourceMappingURL=mani.map